const siteData = {
  culthist: [
    {
      id: "tirunelli",
      name: "Tirunelli Temple",
      description: "Ancient temple dedicated to Lord Vishnu, nestled in the hills of Wayanad.",
      image: "assets/img/tirunelli.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "mosque1",
      name: "Varampatta mosque",
      description: "Historic Varampatta mosque with beautiful architecture and cultural significance.",
      image: "assets/img/ghats_wayanad.jpg",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "temple2",
      name: "Jain Temple",
      description: "Historic Jain temple with beautiful architecture and cultural significance.",
      image: "assets/img/ghats_wayanad.jpg",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "temple3",
      name: "Seetha Lava Kusha Temple",
      description: "Temple associated with the epic Ramayana, located in a serene setting.",
      image: "assets/img/wayanad_mist.jpg",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }
  ],
  romantic: [
    {
      id: "karapuzhadam",
      name: "Karapuzhs Dam",
      description: "Karapuzhs Dam.",
      image: "assets/img/falls/meenmufalls.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "PookodeLake",
      name: "Pookode Lake",
      description: "Also known as Sentinel Rock Waterfalls, perfect for trekking and rock climbing.",
      image: "assets/img/falls/soojipara_falls_b_w_wayanad.jpg",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "banasurasagardam",
      name: "Banasurasagar Dam",
      description: "A picturesque waterfall surrounded by lush greenery and coffee plantations.",
      image: "assets/img/falls/kanta_falls.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }
  ],
  waterfalls: [
    {
      id: "meenmutty",
      name: "Meenmutty Falls",
      description: "One of the largest and most spectacular waterfalls in Wayanad.",
      image: "assets/img/falls/meenmufalls.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "soochipara",
      name: "Soochipara Falls",
      description: "Also known as Sentinel Rock Waterfalls, perfect for trekking and rock climbing.",
      image: "assets/img/falls/soojipara_falls_b_w_wayanad.jpg",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "kanthanpara",
      name: "Kanthanpara Falls",
      description: "A picturesque waterfall surrounded by lush greenery and coffee plantations.",
      image: "assets/img/falls/kanta_falls.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }
  ],
  museums: [
    {
      id: "folklore",
      name: "Folklore Museum",
      description: "Showcases the rich cultural heritage and tribal artifacts of Wayanad.",
      image: "assets/img/tirunelli.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "edakkal",
      name: "Edakkal Caves",
      description: "Ancient rock shelter with prehistoric carvings and inscriptions.",
      image: "assets/img/edakkal_caves.webp",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    },
    {
      id: "ambalavayal",
      name: "Ambalavayal Heritage Museum",
      description: "Displays tribal heritage and ancient artifacts from the region.",
      image: "assets/img/tea_wayanad.webp",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }
  ],
plantation: [
    {
      id: "plantation",
      name: "Harissons",
      description: "Showcases the rich cultural heritage and tribal artifacts of Wayanad.",
      image: "assets/img/tirunelli.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }],
wildlife: [
    {
      id: "Bandipur",
      name: "Bandipur Museum",
      description: "Showcases the rich cultural heritage and tribal artifacts of Wayanad.",
      image: "assets/img/tirunelli.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }],
trucking: [
    {
      id: "Chundale",
      name: "chundale",
      description: "Showcases the rich cultural heritage and tribal artifacts of Wayanad.",
      image: "assets/img/tirunelli.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }],
farms: [
    {
      id: "ambalavayal",
      name: "Ambalavayal",
      description: "Showcases the rich cultural heritage and tribal artifacts of Wayanad.",
      image: "assets/img/tirunelli.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }],
food: [
    {
      id: "resturants",
      name: "Resturants",
      description: "Showcases the rich cultural heritage and tribal artifacts of Wayanad.",
      image: "assets/img/tirunelli.png",
      rating: "",
      holidays: "Sun",
      timing: "10:00-18:00",
      Contact : "+91-000 000 0000",
      locationid : "1",
      knowmore: "./knowmore.html"
    }],

};

window.addEventListener('load', function() {
  // //console.log('DOM fully loaded');

  // Get all sections first
  const sections = document.querySelectorAll('#projects .container .row.justify-content-center');
  // //console.log('Total sections found:', sections.length);

  // Dynamically initialize each section based on the data available
  // This will work for any number of sections
  let sectionIndex = 1;
  Object.keys(siteData).forEach((sectionType) => {
    if (siteData[sectionType]) {
      initializeSection(sectionType, siteData[sectionType], sectionIndex);
      sectionIndex++;
    }
  });
});

function initializeSection(sectionType, data, sectionIndex) {
  let sectionContainer;
  let sectionTitle;

  // Get all sections to ensure we're targeting the correct one
  const allSections = document.querySelectorAll('#projects .container .row.justify-content-center');

  // Determine if this is an odd or even section
  const isOdd = sectionIndex % 2 === 1;

  // Find the section container by index
  if (sectionIndex - 1 < allSections.length) {
    sectionContainer = allSections[sectionIndex - 1];

    // Try to get the section title from the HTML
    const titleElement = sectionContainer.querySelector('.project-text h4');
    if (titleElement) {
      sectionTitle = titleElement.textContent;
    } else {
      // Fallback to generating a title from the section type
      sectionTitle = sectionType.charAt(0).toUpperCase() + sectionType.slice(1);
    }
  } else {
    //console.error('Section container not found for index:', sectionIndex);
    return;
  }

  if (!sectionContainer) {
    //console.error('Section container not found for:', sectionType);
    //console.log('Available sections:', allSections.length);
    return;
  }

  //console.log(`Found section for ${sectionType}:`, sectionContainer);

  // Check if the section has the necessary structure
  const imgColumn = sectionContainer.querySelector('.col-lg-6 img');
  if (!imgColumn) {
    //console.error(`Section ${sectionType} does not have the required image column structure`);
    return;
  }

  const imgColumnParent = imgColumn.closest('.col-lg-6');
  const contentColumn = sectionContainer.querySelector('.col-lg-6:not(:has(img))');
  const isImageOnRight = imgColumnParent.nextElementSibling === null || !imgColumnParent.nextElementSibling.classList.contains('col-lg-6');

  const imgElement = imgColumn;

  const arrowContainer = document.createElement('div');
  arrowContainer.className = 'arrows-container';
  sectionContainer.appendChild(arrowContainer);

  // Always create horizontal arrows (left-right placement) for all sections
  const leftArrow = document.createElement('div');
  leftArrow.className = 'tab-arrow tab-arrow-left';
  leftArrow.innerHTML = '&laquo;';
  leftArrow.setAttribute('aria-label', 'Previous tab');
  arrowContainer.appendChild(leftArrow);

  const rightArrow = document.createElement('div');
  rightArrow.className = 'tab-arrow tab-arrow-right';
  rightArrow.innerHTML = '&raquo;';
  rightArrow.setAttribute('aria-label', 'Next tab');
  arrowContainer.appendChild(rightArrow);

  // Set up event listeners based on whether the section is odd or even
  let currentTabIndex = 0;

  leftArrow.addEventListener('click', function() {
    currentTabIndex = (currentTabIndex > 0) ? currentTabIndex - 1 : data.length - 1;
    updateContent('prev', isOdd); // Pass isOdd to determine navigation type
  });

  rightArrow.addEventListener('click', function() {
    currentTabIndex = (currentTabIndex < data.length - 1) ? currentTabIndex + 1 : 0;
    updateContent('next', isOdd); // Pass isOdd to determine navigation type
  });

  const textContainer = sectionContainer.querySelector('.project-text');
  if (!textContainer) {
    //console.error('Text container not found');
    return;
  }

  textContainer.innerHTML = '';

  const titleElement = document.createElement('h4');
  titleElement.className = 'text-white';
  titleElement.textContent = sectionTitle;
  textContainer.appendChild(titleElement);

  const tabContent = document.createElement('div');
  tabContent.className = 'tab-content';
  textContainer.appendChild(tabContent);

  const hr = document.createElement('hr');
  hr.className = 'd-none d-lg-block mb-0 ' + (isImageOnRight ? 'ml-0' : 'mr-0');
  textContainer.appendChild(hr);

  const imgWrapper = document.createElement('div');
  imgWrapper.className = 'img-wrapper';
  imgWrapper.style.position = 'relative';
  imgWrapper.style.overflow = 'hidden';
  imgWrapper.style.width = '100%';
  imgWrapper.style.height = '100%';

  imgElement.parentNode.insertBefore(imgWrapper, imgElement);
  imgWrapper.appendChild(imgElement);

  function updateContent(direction = 'next', isHorizontal = true) {
    const currentItem = data[currentTabIndex];

    // Create temporary image for animation
    const tempImg = document.createElement('img');
    tempImg.className = 'temp-image';
    tempImg.src = currentItem.image;
    tempImg.alt = currentItem.name;
    tempImg.style.position = 'absolute';
    tempImg.style.top = '0';
    tempImg.style.left = '0';
    tempImg.style.width = '100%';
    tempImg.style.height = '100%';
    tempImg.style.opacity = '0';

    // Set initial position based on navigation type and direction
    if (isHorizontal) {
      // Horizontal navigation (left-right)
      tempImg.style.left = direction === 'next' ? '-100%' : '100%';
      tempImg.style.top = '0';
    } else {
      // Vertical navigation (top-bottom)
      tempImg.style.top = direction === 'next' ? '-100%' : '100%';
      tempImg.style.left = '0';
    }

    imgWrapper.appendChild(tempImg);

    // Animate old image out
    const oldImages = imgWrapper.querySelectorAll('img:not(.temp-image)');
    oldImages.forEach(oldImg => {
      oldImg.style.transition = 'all 0.5s ease';
      oldImg.style.opacity = '0';

      if (isHorizontal) {
        oldImg.style.left = direction === 'next' ? '100%' : '-100%';
      } else {
        oldImg.style.top = direction === 'next' ? '100%' : '-100%';
      }

      setTimeout(() => {
        oldImg.remove();
      }, 500);
    });

    // Create temporary content for animation
    const tempContent = document.createElement('div');
    tempContent.className = 'tab-content-temp';
    tempContent.innerHTML = `
      <h5 class="text-white">${currentItem.name}</h5>
      <p class="mb-0 text-white-50">${currentItem.description}</p>
      <a href="${currentItem.knowmore || '#'}"   class="nav-link js-scroll-trigger">Know More</a>`;

    tempContent.style.position = 'absolute';
    tempContent.style.width = '100%';
    tempContent.style.opacity = '0';

    if (isHorizontal) {
      tempContent.style.left = direction === 'next' ? '-50px' : '50px';
    } else {
      tempContent.style.top = direction === 'next' ? '-50px' : '50px';
    }

    tabContent.appendChild(tempContent);

    // Animate old content out
    const oldContents = tabContent.querySelectorAll('.tab-content-temp:not(:last-child)');
    oldContents.forEach(oldContent => {
      oldContent.style.transition = 'all 0.5s ease';
      oldContent.style.opacity = '0';

      if (isHorizontal) {
        oldContent.style.left = direction === 'next' ? '50px' : '-50px';
      } else {
        oldContent.style.top = direction === 'next' ? '50px' : '-50px';
      }

      setTimeout(() => {
        oldContent.remove();
      }, 500);
    });

    // Animate new image in
    setTimeout(() => {
      tempImg.style.transition = 'all 0.5s ease';
      tempImg.style.opacity = '1';

      if (isHorizontal) {
        tempImg.style.left = '0';
      } else {
        tempImg.style.top = '0';
      }

      // Remove temp-image class after animation
      setTimeout(() => {
        tempImg.classList.remove('temp-image');
      }, 500);
    }, 50);

    // Animate new content in
    setTimeout(() => {
      tempContent.style.transition = 'all 0.5s ease';
      tempContent.style.opacity = '1';

      if (isHorizontal) {
        tempContent.style.left = '0';
      } else {
        tempContent.style.top = '0';
      }
    }, 50);
  }

  updateContent('next', isOdd);
}

// Add CSS for vertical arrows
const style = document.createElement('style');
style.textContent = `
  .tab-content {
    padding: 15px 0;
    min-height: 100px;
    position: relative;
    overflow: hidden;
  }

  .tab-content-temp {
    padding: 0;
    transition: all 0.5s ease;
  }

  .img-wrapper {
    position: relative;
    overflow: hidden;
    width: 100%;
    height: 100%;
  }

  .arrows-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
  }

  .tab-arrow {
    background-color: rgba(52, 58, 64, 0.7);
    color: #f8f9fa;
    border: none;
    padding: 12px 15px;
    cursor: pointer;
    border-radius: 50%;
    font-size: 18px;
    transition: all 0.3s ease;
    position: absolute;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    pointer-events: auto;
  }

  .tab-arrow:hover {
    background-color: #64a19d;
  }

  .tab-arrow-left {
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
  }

  .tab-arrow-right {
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
  }

  .tab-arrow-up {
    left: 50%;
    top: 20px;
    transform: translateX(-50%);
  }

  .tab-arrow-down {
    left: 50%;
    bottom: 20px;
    transform: translateX(-50%);
  }

  .row.justify-content-center {
    position: relative;
  }

  .project-text {
    position: relative;
    padding: 0 20px;
  }
`;

document.head.appendChild(style);

function debugDOMStructure() {
  //console.log('Location section:', document.getElementById('projects'));
  //console.log('Container in Location:', document.querySelector('#projects .container'));
  //console.log('Rows in container:', document.querySelectorAll('#projects .container .row'));
}

window.addEventListener('load', debugDOMStructure);